import{r,j as e}from"./motion-DtcReM-G.js";import{c as m,V as v,a as k,X as y}from"./x-DlX-TBMt.js";import"./vendor-DBiAVD-u.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],N=m("camera",w);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],M=m("maximize-2",T);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],z=m("minimize-2",E);function I({camerasWithMotion:a=[],onClose:s,isVisible:l=!1,autoCloseDelay:c=6e4}){const[d,h]=r.useState(!0),[i,p]=r.useState(!1),[f,u]=r.useState(c/1e3);if(r.useEffect(()=>{if(!l)return;u(c/1e3);const t=setTimeout(()=>{s==null||s()},c),n=setInterval(()=>{u(o=>Math.max(0,o-1))},1e3);return()=>{clearTimeout(t),clearInterval(n)}},[l,c,s]),r.useEffect(()=>{const t=n=>{n.key==="Escape"&&l&&(s==null||s())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[l,s]),!l||a.length===0)return null;const b=t=>{t.target===t.currentTarget&&(s==null||s())},j=()=>{p(!i)},g=()=>{const t=a.length;return t===1?"w-full max-w-4xl":t===2?"w-1/2 max-w-2xl":"w-1/3 max-w-xl"};return e.jsx("div",{className:`fixed inset-0 bg-black/80 backdrop-blur-sm z-[9999] flex items-center justify-center transition-opacity duration-300 ${l?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:b,children:e.jsxs("div",{className:`relative ${i?"w-full h-full":"max-w-7xl w-full mx-4"} transition-all duration-300`,children:[e.jsxs("div",{className:"absolute top-4 left-0 right-0 z-10 flex items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-white",children:[e.jsxs("div",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Motion Alert"]}),e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-full px-3 py-1 text-sm",children:["Auto-close in ",f,"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(!d),className:"p-3 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm transition-colors",title:d?"Unmute":"Mute",children:d?e.jsx(v,{className:"w-5 h-5"}):e.jsx(k,{className:"w-5 h-5"})}),e.jsx("button",{onClick:j,className:"p-3 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm transition-colors",title:i?"Exit Fullscreen":"Fullscreen",children:i?e.jsx(z,{className:"w-5 h-5"}):e.jsx(M,{className:"w-5 h-5"})}),e.jsx("button",{onClick:s,className:"p-3 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm transition-colors",title:"Close",children:e.jsx(y,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:`flex items-center justify-center gap-4 ${i?"h-full pt-20 pb-16":"py-16"}`,children:a.map((t,n)=>{var o,x;return e.jsxs("div",{className:`${g()} aspect-video relative bg-gray-900 rounded-lg overflow-hidden border-2 border-gray-600`,children:[e.jsxs("div",{className:"absolute top-3 left-3 z-10 bg-black/70 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-medium",children:[t.name||((o=t.attributes)==null?void 0:o.friendly_name)||`Camera ${n+1}`,t.source&&e.jsx("span",{className:"ml-2 text-xs bg-white/20 px-1 rounded",children:t.source==="mqtt"?"MQTT":"HA"})]}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-black rounded-full animate-pulse"}),"MOTION"]}),e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.liveStreamUrl?e.jsx("video",{src:t.liveStreamUrl,autoPlay:!0,muted:d,className:"w-full h-full object-cover",controls:!1,playsInline:!0}):t.snapshot||t.lastSnapshot?e.jsx("img",{src:t.snapshot||t.lastSnapshot,alt:`${t.name||((x=t.attributes)==null?void 0:x.friendly_name)} snapshot`,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(N,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No feed available"}),t.source==="mqtt"&&e.jsx("p",{className:"text-xs mt-1",children:"Ring MQTT Alert"})]})}),(t.lastMotionTime||t.motionTime)&&e.jsxs("div",{className:"absolute bottom-3 left-3 bg-black/70 backdrop-blur-sm text-white px-2 py-1 rounded text-xs",children:["Motion: ",new Date(t.lastMotionTime||t.motionTime).toLocaleTimeString(),t.location&&e.jsxs("span",{className:"ml-2 text-gray-300",children:["• ",t.location]})]})]},t.entity_id)})}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:e.jsxs("div",{className:"bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm flex items-center gap-2",children:[e.jsxs("span",{children:[a.length," camera",a.length>1?"s":""," detected motion"]}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx("span",{children:"Press ESC or click outside to dismiss"})]})})]})})}export{I as default};
