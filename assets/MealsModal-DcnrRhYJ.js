var S=Object.defineProperty,k=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var j=(n,t,r)=>t in n?S(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,m=(n,t)=>{for(var r in t||(t={}))R.call(t,r)&&j(n,r,t[r]);if(y)for(var r of y(t))z.call(t,r)&&j(n,r,t[r]);return n},b=(n,t)=>k(n,M(t));import{r as a,j as o}from"./motion-DtcReM-G.js";import"./vendor-DBiAVD-u.js";const p=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function F({isOpen:n,initialData:t,onClose:r,onSave:f}){const[l,g]=a.useState(t||{}),[u,c]=a.useState(!1),[d,h]=a.useState(""),[W,C]=a.useState(!1),x=a.useRef(null);if(a.useRef(null),a.useEffect(()=>{n&&x.current&&x.current.focus()},[n]),!n)return null;const v=(e,i)=>{g(b(m({},l),{[e]:i}))},s=e=>{d&&g(b(m({},l),{[d]:e}))},D=e=>{h(e)},w=e=>{e.preventDefault(),console.log("MealsModal: handleSubmit called with formData:",l),console.log("MealsModal: calling onSave with:",l),f==null||f(l),r(),c(!1)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:o.jsxs("form",{onSubmit:w,className:"bg-card rounded-xl shadow-modal p-6 w-full max-w-md",style:{marginBottom:u?"300px":"0"},children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold",children:"Edit Weekly Meals"}),o.jsx("button",{type:"button",onClick:()=>{r(),c(!1)},className:"text-gray-500 hover:text-gray-700 text-2xl font-light",children:"✕"})]}),o.jsx("div",{className:"flex flex-col gap-3 max-h-[60vh] overflow-y-auto scrollbar-hide",children:p.map(e=>o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e," ",d===e&&u&&"← Typing here"]}),o.jsx("input",{ref:e===p[0]?x:null,type:"text",value:l[e]||"",onChange:i=>v(e,i.target.value),onFocus:()=>D(e),className:`w-full border border-gray-300 rounded px-2 py-1 mt-1 text-sm ${d===e&&u?"border-blue-500 bg-blue-50":""}`})]},e))}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:()=>{r(),c(!1)},className:"px-4 py-2 rounded text-sm bg-gray-100 hover:bg-gray-200",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded hover:bg-indigo-700",children:"Save"})]})]})}),u?o.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"#f5f5f5",padding:"12px",borderTop:"1px solid #d1d5db",zIndex:9999},children:[o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gap:"2px",marginBottom:"2px"},children:["1","2","3","4","5","6","7","8","9","0"].map(e=>o.jsx("button",{onMouseDown:i=>i.preventDefault(),onClick:()=>s((l[d]||"")+e),style:{padding:"14px 8px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"16px",fontWeight:"normal",touchAction:"manipulation",userSelect:"none",cursor:"pointer"},children:e},e))}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gap:"2px",marginBottom:"2px"},children:["q","w","e","r","t","y","u","i","o","p"].map(e=>o.jsx("button",{onMouseDown:i=>i.preventDefault(),onClick:()=>s((l[d]||"")+e),style:{padding:"14px 8px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"16px",fontWeight:"normal",touchAction:"manipulation",userSelect:"none",cursor:"pointer"},children:e.toUpperCase()},e))}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(9, 1fr)",gap:"2px",marginBottom:"2px"},children:["a","s","d","f","g","h","j","k","l"].map(e=>o.jsx("button",{onMouseDown:i=>i.preventDefault(),onClick:()=>s((l[d]||"")+e),style:{padding:"14px 8px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"16px",fontWeight:"normal",touchAction:"manipulation",userSelect:"none",cursor:"pointer"},children:e.toUpperCase()},e))}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"2px",marginBottom:"8px"},children:["z","x","c","v","b","n","m"].map(e=>o.jsx("button",{onMouseDown:i=>i.preventDefault(),onClick:()=>s((l[d]||"")+e),style:{padding:"14px 8px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"16px",fontWeight:"normal",touchAction:"manipulation",userSelect:"none",cursor:"pointer"},children:e.toUpperCase()},e))}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1fr",gap:"2px"},children:[o.jsx("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>s((l[d]||"")+" "),style:{padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"14px",fontWeight:"normal",touchAction:"manipulation",cursor:"pointer"},children:"space"}),o.jsx("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>s((l[d]||"").slice(0,-1)),style:{padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"14px",fontWeight:"normal",touchAction:"manipulation",cursor:"pointer"},children:"⌫"}),o.jsx("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>s(""),style:{padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"14px",fontWeight:"normal",touchAction:"manipulation",cursor:"pointer"},children:"clear"}),o.jsx("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>{const e=p.indexOf(d);e<p.length-1&&h(p[e+1])},style:{padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"14px",fontWeight:"normal",touchAction:"manipulation",cursor:"pointer"},children:"next"}),o.jsx("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>{c(!1),C(!0)},style:{padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",fontSize:"14px",fontWeight:"normal",touchAction:"manipulation",cursor:"pointer"},children:"✕"})]})]}):null]})}export{F as default};
